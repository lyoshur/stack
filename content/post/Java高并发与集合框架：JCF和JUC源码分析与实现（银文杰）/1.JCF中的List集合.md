---
title: 第一章 JCF中的List集合
description: Java高并发与集合框架：JCF和JUC源码分析与实现（银文杰）- 第一章 JCF中的List集合
slug: Java高并发与集合框架：JCF和JUC源码分析与实现（银文杰）- 第一章 JCF中的List集合
date: 2022-08-17 10:14:00+0000
categories:
    - Java高并发与集合框架：JCF和JUC源码分析与实现（银文杰）
tags:
    - Java
---

# 第一章  JCF中的List集合

## 1 List集合概要和重要接口介绍

JCF中的List集合涉及的部分重要接口

- java.util.ArrayList

- java.util.LinkedList

- java.util.Vector

- java.util.Stack

其中java.util.Stack继承自java.util.Vector。不过在jdk1.7+已经推荐使用性能更好的java.util.ArrayDeque集合作为替代方案。

要理解java.util包中关于java.util.List接口的重要实现类，需要理清楚其涉及的

- 主要接口

  - java.lang.Iterable (可迭代接口)

  - java.util.Collection(集合接口)

    有些集合类，并不一定会实现这个接口

- 主要抽象类

  - java.util.AbstractList(抽象列表)

    支持随机访问
  
  - java.util.AbstractSequentialList(抽象连续列表)
  
    不支持随机访问

在JCF中，可以根据List集合在各维度表现出来的工作特点对其进行分类：

- 是否支持随机访问
- 数据是否支持修改
- 集合容量是否可变

【插入】标识接口：是指Java中用于标识某个类是否具备某种操作特性、功能类型的接口。标识接口通常不需要下层类实现任何方法。

- java.util.RandomAccess
- java.lang.Cloneable
- java.io.Serializable

java.util.ArrayList、java.util.Vector集合和java.util.concurrent.CopyOnWriteArrayList集合都实现了java.util.RandomAccess接口，表示它们支持集合中数据对象的随机访问。实现java.util.RandomAccess接口的还有很多第三方类库，如一些厂商封装的JSON工具中的JSONArray类。这些实现了java.util.RandomAccess标识接口的List集合在工作时也会被区别对待。

JDK14+ instanceof 模式匹配 Girraffe

LinkedList集合的内部结构是一个双向链表，要寻找链表中某个索引位上的数据对象，只能从头部或尾部依次查询.

## 2 Vector

Vector集合的工作特性除了支持数据对象的随机访问，还有集合的大小可变、保证线程安全的运行环境

## 3 ArrayList

ArrayList集合是JCF中非常重要的集合之一，也是实际工作中最常使用的集合之一。ArrayList集合拥有与Vector集合类似的接口和操作逻辑（从JDK 1.2开始提供），但它不支持线程安全操作（Vector集合支持线程安全操作，但是基于线程安全的多线程操作性能不高）。ArrayList集合也支持随机访问，也就是说，ArrayList集合在单线程下对指定索引位上的数据读取操作的时间复杂度为O(1)。

ArrayList集合是程序员在单线程操作场景中最常使用的List集合之一。该集合的内部结构是一个数组，并且这个数组在需要的时候可以进行扩容操作，所以理论上ArrayList集合能存储任意数量的数据对象（但实际上受各种客观因素限制而无法实现）。ArrayList集合允许将数据对象添加到数组的任意有效索引位上，并且允许从数组的任意有效索引位上获取数据对象。

### 3.1 集合内部结构

ArrayList集合中数组的默认初始化容量值也为10，也可以指定集合中数组的初始化容量值，但如果使用者没有指定初始化容量值，那么ArrayList集合中的elementData数组会被初始化为一个容量值为0的空数组。

### 3.2 扩容逻辑

ArrayList集合在进行扩容操作时会将当前容量增大50%，并且扩容逻辑不能干预，除非扩容前容量值小于10（如果发生这样的情况，则首先扩容到10）。ArrayList集合的扩容逻辑相对动态，这保证了在扩容操作频率和扩容大小之间更好的平衡性。

## 4 Stack

顾名思义，Stack集合的工作效果符合栈结构的定义。栈结构是指能使集合中的数据对象具有后进先出（LIFO）操作特性的集合结构。Stack集合同样有线程安全操作特性（但同样不适合在高并发场景中使用），Stack集合的扩容增量通常也是当前容量的1倍；Stack集合也不会对集合的序列化过程和反序列化过程进行特殊优化处理。

## 5 LinkedList

java.util.LinkedList集合是本书讲解的最后一种主要的List集合，也是本书讲解的第一种Queue集合。换句话说，LinkedList集合同时具有List集合和Queue集合的基本特性。

LinkedList集合的主要结构是双向链表。双向链表中的节点不要求有连续的内存存储地址，因此在向双向链表中插入新节点时，无须申请一块连续的存储空间，只需按需申请存储空间。LinkedList集合中的链表的每个节点都使用一个java.util.LinkedList.Node类的对象进行描述。
