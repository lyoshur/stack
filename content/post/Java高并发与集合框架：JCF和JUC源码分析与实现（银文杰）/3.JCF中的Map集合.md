---
title: 第三章 JCF中的Map集合
description: Java高并发与集合框架：JCF和JUC源码分析与实现（银文杰）- 第三章 JCF中的Map集合
slug: Java高并发与集合框架：JCF和JUC源码分析与实现（银文杰）- 第三章 JCF中的Map集合
date: 2022-08-22 14:48:00+0000
categories:
    - Java高并发与集合框架：JCF和JUC源码分析与实现（银文杰）
tags:
    - Java
---

# 第三章 JCF中的Map集合

JCF中的Map集合和Set集合之间存在非常密切的关联关系，从相应集合的命名可以看出来，如HashMap集合和HashSet集合、TreeMap集合和TreeSet集合、LinkedHashMap集合和LinkedHashSet集合、ConcurrentSkipListSet集合和ConcurrentSkipListMap集合。因此，如果搞清楚了JCF中的Map集合结构，就基本搞清楚了JCF中的Set集合结构。本书首先介绍JCF中具有代表性的Map集合，然后在此基础上针对性地介绍Set集合。

TreeMap集合是基于红黑树结构构造的，HashMap集合和LinkedHashMap集合是基于数组+链表+红黑树的复合结构构造的，这两种集合的区别仅体现在LinkedHashMap集合中增加了一个虚拟的链表结构。

## 1 java.utiI.Map接口

java.util.Map接口是JCF中Map集合的顶层接口，它给出了Map体系中的基本操作功能，并且要求下层具体的Map集合对其进行实现

- V put(K key, V value);

- void clear();

- V get(Object K);

- int size();

- boolean isEmpty();

##  2 java.utiI.SortedMap接口

## 3 java.utiI.NavigabIeMap接口

## 4 java.utiI.AbstractMap抽象类

java.util.AbstractMap抽象类是实现了java.util.Map接口的一个抽象类，主要用于向下层具体的Map集合提供一些默认的功能逻辑，以便减少具体Map集合的构建源码量，从而降低实现具体Map集合的难度。

## 5 TreeMap

TreeMap集合是基于红黑树构建的，其集合内的所有K-V键值对节点都是这棵红黑树上的节点。这些K-V键值对节点的排列顺序主要基于两种逻辑考虑：第一种是基于K-V键值对节点中Key键信息的Hash值，第二种是基于使用者设置的java.util.Comparator接口实现的比较结果。选择哪种排序逻辑取决于TreeMap集合在实例化时使用哪个构造方法。

【note】这里指的插入这个Map的数据，会根据java.util.Comparator进行排序，并且，当进行元素查找时，是在树上进行查找。而不是按照hash的方式。

## 6 LinkedHashMap

LinkedHashMap集合继承自HashMap集合，也就是说，前者和后者的基本结构一致。在HashMap集合的基础上，LinkedHashMap集合提供了一个新的特性，用于保证整个集合内部各个节点可以以某种顺序进行遍历（迭代器支持）。

【note】这里很奇怪。为什么jdk不提供一个ArrayHashMap

