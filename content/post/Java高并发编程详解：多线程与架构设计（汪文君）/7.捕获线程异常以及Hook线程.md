---
title: 第七章 捕获线程异常以及Hook线程
description: Java高并发编程详解：多线程与架构设计（汪文君）- 第七章 捕获线程异常以及Hook线程
slug: Java高并发编程详解：多线程与架构设计（汪文君）- 第七章 捕获线程异常以及Hook线程
date: 2022-08-15 16:50:00+0000
categories:
    - Java高并发编程详解：多线程与架构设计（汪文君）
tags:
    - Java
---

# 第七章 捕获线程异常以及Hook线程

## 1 捕获线程异常

线程在执行单元中是不允许抛出checked异常的，在线程运行的上下文中，父线程无法直接获得它运行时出现的异常信息，对此java给我们提供了一个UncaughtExceptionHandler接口。当线程在运行过程中出现异常时，会回调该接口。从而得知是哪个线程出错，以及出现了什么样的错误。

线程出现问题，但没有给线程指定UncaughtExceptionHandler接口时，会向上寻找Group的UEH接口，如果还没找到，会继续向上查找Group的接口。最后走到System.err

## 2 Hook线程

Hook线程只有在收到退出信号时会被执行，如果在kill的时候使用了-9 那么Hook线程也不会被执行，Hook线程也可以用来执行资源释放，但不要再Hook中执行一些耗时非常长的操作，以为会导致程序无法退出。

```java
Runtime.getRuntime().addShutdownHook()
```

