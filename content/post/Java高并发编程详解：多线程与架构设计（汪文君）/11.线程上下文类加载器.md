---
title: 第十一章 线程上下文类加载器
description: Java高并发编程详解：多线程与架构设计（汪文君）- 第十一章 线程上下文类加载器
slug: Java高并发编程详解：多线程与架构设计（汪文君）- 第十一章 线程上下文类加载器
date: 2022-08-16 14:30:00+0000
categories:
    - Java高并发编程详解：多线程与架构设计（汪文君）
tags:
    - Java
---

# 第十一章 线程上下文类加载器

## 1 为什么需要线程上下文类加载器

Thread类提供了API用来获取以及设置当前线程的上下文类加载器，如果当前线程没有设置上下文类加载器，那么它将与父线程抱持同样的类加载器。

JDK核心库中提供了很多SPI (Service Provider Interface)。常见的包括JDBC、JCE、JNDI、JAXP、JBI等，JDK只提供了这些接口之间的逻辑关系，但不提供具体的实现。Java使用 JDBC这个SPI完全透明了应用程序和第三方厂商数据库驱动的具体实现。不管数据库类型如何切换，应用程序只需要更新JDBC的驱动jar包和驱动名称，而不需要进行任何更新。

由于JDK定义了SPI的标准接口，加之这些接口作为JDK核心标准类库的一部分，即想要完全透明标准接口的实现，又想与JDK核心库进行捆绑，由于JVM双亲委托机制的限制，根加载器不可能加载的到第三方厂商提供的具体实现。为了解决这个困境，JDK只好提供一个不太优雅的设计，线程上下文类加载器，有了线程上下文类加载器，根加载器反而需要委托子类加载器去加载厂商提供的SPI具体实现。

